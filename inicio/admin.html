<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Gestión de Usuarios y Licitadores</title>
    <link rel="stylesheet" href="../css/styles.css">
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-database.js"></script>
</head>
<body>
    <h1>Administrador - Gestión de Usuarios y Licitadores</h1>

    <div>
        <!-- Formulario para Alta de Usuarios -->
        <h2>Alta de Usuarios</h2>
        <form id="formUsuario">
            <label for="nombreUsuario">Nombre:</label>
            <input type="text" id="nombreUsuario" placeholder="Nombre del usuario" required><br>
            <label for="userUsuario">Usuario:</label>
            <input type="text" id="userUsuario" placeholder="Nombre de usuario" required><br>
            <label for="passUsuario">Contraseña:</label>
            <input type="password" id="passUsuario" placeholder="Contraseña" required><br>
            <label for="emailUsuario">Correo:</label>
            <input type="email" id="emailUsuario" placeholder="Correo electrónico" required><br>
            <button type="button" id="btnGuardarUsuario">Guardar Usuario</button>
        </form>
    </div>

    <div>
        <!-- Formulario para Alta de Licitadores -->
        <h2>Alta de Licitadores</h2>
        <form id="formLicitador">
            <label for="nombreEmpresa">Nombre de la Empresa:</label>
            <input type="text" id="nombreEmpresa" placeholder="Nombre de la empresa" required><br>
            <button type="button" id="btnGuardarLicitador">Guardar Licitador</button>
        </form>
    </div>

    <script>
        // Configuración de Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyCUHHGPBdN2VAWaF_J7wYqZ54sPBxy1RFs",
            authDomain: "tenderlicitaciones-9ba50.firebaseapp.com",
            databaseURL: "https://tenderlicitaciones-9ba50-default-rtdb.firebaseio.com/",
            projectId: "tenderlicitaciones-9ba50",
            storageBucket: "tenderlicitaciones-9ba50.firebasestorage.app",
            messagingSenderId: "531013447459",
            appId: "1:531013447459:web:07580f26176abe2fe62696",
            measurementId: "G-E9RJCXF5MC"
        };

        // Inicializar Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Función para guardar usuarios en Firebase
        document.getElementById("btnGuardarUsuario").addEventListener("click", function() {
            const nombre = document.getElementById("nombreUsuario").value.trim();
            const user = document.getElementById("userUsuario").value.trim();
            const pass = document.getElementById("passUsuario").value.trim();
            const email = document.getElementById("emailUsuario").value.trim();

            if (nombre && user && pass && email) {
                const nuevoUsuarioId = database.ref().child("usuarios").push().key;
                database.ref("usuarios/" + nuevoUsuarioId).set({
                    id: nuevoUsuarioId,
                    nombre: nombre,
                    user: user,
                    pass: pass,
                    email: email
                }).then(() => {
                    alert("Usuario guardado con éxito");
                    document.getElementById("formUsuario").reset();
                }).catch(error => {
                    alert("Error al guardar el usuario: " + error.message);
                });
            } else {
                alert("Por favor, completa todos los campos.");
            }
        });

        // Función para guardar licitadores en Firebase
        document.getElementById("btnGuardarLicitador").addEventListener("click", function() {
            const nombreEmpresa = document.getElementById("nombreEmpresa").value.trim();

            if (nombreEmpresa) {
                const nuevoLicitadorId = database.ref().child("licitadores").push().key;
                database.ref("licitadores/" + nuevoLicitadorId).set({
                    id: nuevoLicitadorId,
                    nombreEmpresa: nombreEmpresa
                }).then(() => {
                    alert("Licitador guardado con éxito");
                    document.getElementById("formLicitador").reset();
                }).catch(error => {
                    alert("Error al guardar el licitador: " + error.message);
                });
            } else {
                alert("Por favor, completa todos los campos.");
            }
        });
    </script>
</body>
</html>
